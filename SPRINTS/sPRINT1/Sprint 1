openapi: 3.0.0
info:
  title: API AI3
  version: 1.0.0
  description: |
    API da Aplicação AI3 para gestão de recursos, upload/download de ficheiros,
    e sistema de avaliações e comentários.

servers:
  - url: http://localhost:3000/api
    description: Servidor local de desenvolvimento

paths:
  /auth/login:
    post:
      summary: Efetuar login de utilizador
      description: Permite que um aluno registado faça login no sistema.
      tags:
        - Autenticação
      responses:
        '200':
          description: Login efetuado com sucesso
        '401':
          description: Credenciais inválidas

  /auth/register:
    post:
      summary: Registar novo utilizador
      description: Permite o registo de novos alunos.
      tags:
        - Autenticação
      responses:
        '201':
          description: Utilizador registado com sucesso
        '400':
          description: Dados inválidos

  /recursos:
    get:
      summary: Listar recursos disponíveis
      description: Retorna todos os recursos públicos com respetivos metadados.
      tags:
        - Recursos
      responses:
        '200':
          description: Lista de recursos
    post:
      summary: Fazer upload de um novo recurso
      description: Envia um novo ficheiro (PDF, DOCX, PPTX, etc.) com metadados.
      tags:
        - Recursos
      responses:
        '201':
          description: Recurso criado com sucesso
        '400':
          description: Ficheiro inválido ou tamanho excedido

  /recursos/{id}:
    get:
      summary: Consultar um recurso específico
      description: Retorna detalhes e metadados de um recurso pelo seu ID.
      tags:
        - Recursos
      parameters:
        - name: id
          in: path
          required: true
          description: ID do recurso
          schema:
            type: string
      responses:
        '200':
          description: Recurso encontrado
        '404':
          description: Recurso não encontrado
    delete:
      summary: Apagar recurso
      description: Remove um recurso existente.
      tags:
        - Recursos
      parameters:
        - name: id
          in: path
          required: true
          description: ID do recurso
          schema:
            type: string
      responses:
        '204':
          description: Recurso eliminado
        '404':
          description: Recurso não encontrado

  /recursos/{id}/avaliacoes:
    post:
      summary: Avaliar um recurso
      description: Permite ao utilizador deixar uma classificação e comentário.
      tags:
        - Avaliações
      parameters:
        - name: id
          in: path
          required: true
          description: ID do recurso
          schema:
            type: string
      responses:
        '200':
          description: Avaliação registada
        '400':
          description: Dados inválidos

  /recursos/pesquisa:
    get:
      summary: Pesquisar recursos
      description: Permite pesquisar por disciplina, tópico, tipo de material ou palavra-chave.
      tags:
        - Pesquisa
      responses:
        '200':
          description: Resultados da pesquisa
